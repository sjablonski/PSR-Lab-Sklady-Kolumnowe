<!doctype html>
<html lang="pl">
<head>
    <%- include ("../partials/head") %>
</head>
<body class="bg-light">
<%- include ("../partials/header") %>
<main>
    <div class="container my-4">
        <form method="POST" enctype="application/x-www-form-urlencoded">
            <input type="hidden" name="_method" value="PUT">
            <input type="hidden" name="id" value="<%= doctor.id %>">
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="firstName">ImiÄ™</label>
                    <input type="text" class="form-control" id="firstName" name="firstName" value="<%= doctor.firstName %>" required>
                </div>
                <div class="form-group col-md-6">
                    <label for="lastName">Nazwisko</label>
                    <input type="text" class="form-control" id="lastName" name="lastName" value="<%= doctor.lastName %>" required>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-sm-6">
                    <label>Specjalizacje:</label>
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="cardiologist" name="specializations" value="Kardiolog">
                        <label class="custom-control-label" for="cardiologist">Kardiolog</label>
                    </div>
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="familyDoctor" name="specializations" value="Lekarz rodzinny">
                        <label class="custom-control-label" for="familyDoctor">Lekarz rodzinny</label>
                    </div>
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="laryngologist" name="specializations" value="Laryngolog">
                        <label class="custom-control-label" for="laryngologist">Laryngolog</label>
                    </div>
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="neurologist" name="specializations" value="Neurolog">
                        <label class="custom-control-label" for="neurologist">Neurolog</label>
                    </div>
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="oculist" name="specializations" value="Okulista">
                        <label class="custom-control-label" for="oculist">Okulista</label>
                    </div>
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="orthopaedist" name="specializations" value="Ortopeda">
                        <label class="custom-control-label" for="orthopaedist">Ortopeda</label>
                    </div>
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="paediatrician" name="specializations" value="Pediatra">
                        <label class="custom-control-label" for="paediatrician">Pediatra</label>
                    </div>
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="surgeon" name="specializations" value="Chirurg">
                        <label class="custom-control-label" for="surgeon">Chirurg</label>
                    </div>
                </div>
                <div class="form-group col-sm-6">
                    <label>Przychodnie:</label>
                    <ul class="list-group">
                        <% doctor.clinics && doctor.clinics.forEach(function(clinic) { %>
                        <li class="list-group-item"><%= clinic.name %></li>
                        <% }); %>
                    </ul>
                </div>
            </div>
            <div class="d-flex flex-row-reverse">
                <button type="submit" class="btn btn-primary">Edytuj</button>
            </div>
        </form>
    </div>
</main>

<%- include ("../partials/scripts") %>

<script>
    const specializations = <%- JSON.stringify(doctor.specializations) %>;
    const getSpecs = document.querySelectorAll("[name='specializations']");
    specializations.forEach(spec => getSpecs.forEach(getSpec => {
        if(spec === getSpec.value) {
            getSpec.checked = true;
        }
    }));
</script>

</body>
</html>